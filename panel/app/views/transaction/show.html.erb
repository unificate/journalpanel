<h1 class="service-title">Changes For Transaction <%=@tid%></h1>
<div class="title-container text-center">
  <div class="container">
    <table class="table table-hover">
      <thead class="thead-light">
        <tr>
            <th scope="col">Change Id</th>
            <th scope="col">Microservice</th>
            <th scope="col">Table</th>
	        <th scope="col">old value</th>
	        <th scope="col">new value</th>
        </tr>
      </thead>
      <tbody>
  <%if @bundledChanges != nil && @bundledChanges.any?%>
	<%@bundledChanges.zip(@metadata).each do |change, meta|%>
        <tr>
	            <td>
                    <%=change.id%>
                </td>
                <td>
                    <%= meta[0]%>
                </td>
                <td>
                    <%=meta[1]%>
                </td>
	    <td>
	      <%JSON.parse(change.old_value).each do |t|%>
	        <%=t[0].to_s + ":" +t[1].to_s%>
	      <%end%>
	    </td>
	    <td>
	      <%JSON.parse(change.new_value).each do |t|%>
                <%=t[0].to_s + ":" + t[1].to_s%>
              <%end%> 
	    </td>
	</tr>
  <%end%>
  <%elsif @executedChanges != nil && @executedChanges.any?%>
	<%@executedChanges.zip(@metadata).each do |change, meta|%>
        <tr>
	              <td>
                    <%=change.id%>
                </td>
                <td>
                    <%= meta[0]%>
                </td>
                <td>
                    <%=meta[1]%>
                </td>
	    <td>
	      <%JSON.parse(change.old_value).each do |t|%>
	        <%=t[0].to_s + ":" +t[1].to_s%>
	      <%end%>
	    </td>
	    <td>
	      <%JSON.parse(change.new_value).each do |t|%>
                <%=t[0].to_s + ":" + t[1].to_s%>
              <%end%> 
	    </td>
	</tr>
  <%end%>
  <%end%>
       </tbody>
     </table>
  </div>
</div>

